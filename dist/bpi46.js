async function wapper(){const VERSION="v.1.0.0.beta";const PLAY_DATA_URL="https://p.eagate.573.jp/game/popn/unilab/playdata";const MEDAL_IMAGE_URL="https://eacache.s.konaminet.jp/game/popn/unilab/images/p/common/medal";const SONGS=[{"song":"001 -どうしんのかいろ-","avg":2146,"max":2322,"wr":2299},{"song":"3 A.M. ディテクティブ・ゲーム","avg":2226,"max":2366,"wr":2352},{"song":"532nm","avg":2045,"max":2176,"wr":2170},{"song":"ABSOLUTE","avg":2133,"max":2290,"wr":2271},{"song":"Afterimage d'automne","avg":2405,"max":2646,"wr":2618},{"song":"Akash","avg":1873,"max":2004,"wr":1993},{"song":"Alicy","avg":2556,"max":2740,"wr":2728},{"song":"Amabie","avg":2112,"max":2232,"wr":2224},{"song":"Angelic Jelly","avg":2278,"max":2456,"wr":2442},{"song":"Arcanos","avg":2091,"max":2222,"wr":2210},{"song":"BabeL ～Next Story～","avg":2473,"max":2756,"wr":2718},{"song":"beat it together","avg":2089,"max":2260,"wr":2244},{"song":"BEEF","avg":2294,"max":2382,"wr":2371},{"song":"Blind","avg":2278,"max":2422,"wr":2412},{"song":"BLSTR","avg":2115,"max":2272,"wr":2257},{"song":"Bolide","avg":2178,"max":2350,"wr":2325},{"song":"brave!","avg":1975,"max":2088,"wr":2086},{"song":"Butter-FLY","avg":2707,"max":2794,"wr":2791},{"song":"CARNIVOROUS","avg":2185,"max":2298,"wr":2289},{"song":"CARTOON☆RagHour","avg":2185,"max":2358,"wr":2337},{"song":"Cassandra","avg":1667,"max":1856,"wr":1839},{"song":"Chaos:Q","avg":1769,"max":2148,"wr":2107},{"song":"Cloud 9","avg":2112,"max":2276,"wr":2265},{"song":"coffee break","avg":1718,"max":1902,"wr":1881},{"song":"Colors","avg":1933,"max":2136,"wr":2106},{"song":"Come to Life","avg":2130,"max":2328,"wr":2310},{"song":"Crumble Soul","avg":2263,"max":2372,"wr":2363},{"song":"CURUS","avg":2562,"max":2638,"wr":2634},{"song":"Daily Lunch Special","avg":2615,"max":2766,"wr":2755},{"song":"De-a lungul vietii","avg":2305,"max":2500,"wr":2483},{"song":"Deep Magenta","avg":2449,"max":2574,"wr":2566},{"song":"demolizione","avg":1446,"max":1560,"wr":1552},{"song":"Denpasar","avg":1875,"max":2000,"wr":1994},{"song":"Desire","avg":2022,"max":2140,"wr":2133},{"song":"Dimension Gale","avg":2283,"max":2424,"wr":2422},{"song":"Drizzly Venom","avg":2067,"max":2176,"wr":2164},{"song":"EBONY & IVORY","avg":1893,"max":2040,"wr":2033},{"song":"Echoes","avg":1923,"max":2074,"wr":2060},{"song":"Engraved Mark","avg":2310,"max":2478,"wr":2471},{"song":"Ensamble Forecast 3/28","avg":2186,"max":2318,"wr":2303},{"song":"Fly far bounce","avg":1750,"max":1882,"wr":1865},{"song":"GALAXY FOREST 11.6&12 ","avg":897,"max":1036,"wr":1024},{"song":"GET WILD","avg":2436,"max":2550,"wr":2540},{"song":"GO²TOS","avg":2074,"max":2132,"wr":2128},{"song":"Gotta Get My Groove On","avg":2117,"max":2198,"wr":2195},{"song":"Gradation","avg":2101,"max":2222,"wr":2215},{"song":"Greening","avg":2419,"max":2560,"wr":2548},{"song":"HADROS GALE","avg":2194,"max":2334,"wr":2326},{"song":"HAGURUMA","avg":2388,"max":2546,"wr":2519},{"song":"H@appy Fever Forever!!","avg":2429,"max":2686,"wr":2668},{"song":"High Gravity","avg":2320,"max":2444,"wr":2440},{"song":"HYENA","avg":2312,"max":2498,"wr":2493},{"song":"IKKI! Explosion","avg":2484,"max":2652,"wr":2642},{"song":"INHERITANCE of WILL","avg":2336,"max":2476,"wr":2466},{"song":"Inside Insight","avg":2185,"max":2292,"wr":2280},{"song":"Into The Light","avg":2201,"max":2286,"wr":2280},{"song":"Kicky Kemari Kicker","avg":1919,"max":2050,"wr":2047},{"song":"Les Vague","avg":2292,"max":2476,"wr":2462},{"song":"Linus","avg":2288,"max":2468,"wr":2455},{"song":"Little Little Princess","avg":2603,"max":2700,"wr":2692},{"song":"LOTUS","avg":2304,"max":2436,"wr":2431},{"song":"L'eternita","avg":1884,"max":2136,"wr":2098},{"song":"MADSPEED狂信道","avg":2014,"max":2212,"wr":2164},{"song":"Magical 4","avg":1796,"max":2074,"wr":2041},{"song":"MA・TSU・RI","avg":2456,"max":2572,"wr":2563},{"song":"Miracle 4","avg":2063,"max":2280,"wr":2262},{"song":"MOON","avg":2123,"max":2268,"wr":2266},{"song":"nalca","avg":2195,"max":2340,"wr":2331},{"song":"NEW PEOPLE","avg":2467,"max":2580,"wr":2575},{"song":"On top of the world","avg":2577,"max":2772,"wr":2748},{"song":"Over Da Moon","avg":2346,"max":2466,"wr":2457},{"song":"Pacify","avg":2239,"max":2370,"wr":2363},{"song":"paparazzi","avg":2039,"max":2168,"wr":2153},{"song":"Phlox","avg":2610,"max":2722,"wr":2709},{"song":"Popperz Chronicle","avg":1748,"max":2068,"wr":2014},{"song":"Poppin' Soda","avg":2525,"max":2592,"wr":2588},{"song":"Psyche Planet-V","avg":2291,"max":2500,"wr":2489},{"song":"pure","avg":1635,"max":1736,"wr":1733},{"song":"Red Cape Theorem","avg":2061,"max":2176,"wr":2166},{"song":"Riot of Color","avg":2096,"max":2262,"wr":2256},{"song":"say...but in vain","avg":2015,"max":2212,"wr":2189},{"song":"Scarlet Pinheel","avg":2140,"max":2276,"wr":2266},{"song":"\"Schall\" we step？","avg":2246,"max":2426,"wr":2410},{"song":"School Life","avg":1692,"max":1884,"wr":1862},{"song":"SESSION With You!","avg":2429,"max":2516,"wr":2508},{"song":"Shades of Day","avg":2296,"max":2420,"wr":2408},{"song":"Shining Wizard","avg":2140,"max":2268,"wr":2263},{"song":"SHION（VENUS mix）","avg":2370,"max":2518,"wr":2502},{"song":"Six String Proof","avg":2049,"max":2234,"wr":2210},{"song":"Soul On Fire","avg":2637,"max":2800,"wr":2789},{"song":"SPEED KING ON FIRE","avg":2150,"max":2310,"wr":2290},{"song":"SPICY PIECE (Ryu☆Remix)","avg":1856,"max":2010,"wr":2002},{"song":"Stella Sinistra","avg":2089,"max":2272,"wr":2255},{"song":"Strawberry Chu♡Chu♡","avg":2230,"max":2410,"wr":2383},{"song":"Struggle","avg":2074,"max":2168,"wr":2163},{"song":"SUPER SUMMER SALE","avg":2336,"max":2464,"wr":2456},{"song":"Sweet,Sweet,Sweet.","avg":2376,"max":2478,"wr":2472},{"song":"Symsonic Breeze","avg":2122,"max":2268,"wr":2266},{"song":"Synergy For Angels","avg":2370,"max":2564,"wr":2553},{"song":"The Sky of Sadness","avg":2207,"max":2356,"wr":2340},{"song":"The Zoo Zone","avg":2112,"max":2264,"wr":2261},{"song":"TOXIC VIBRATION","avg":2373,"max":2542,"wr":2532},{"song":"UNBOUND MIND","avg":2405,"max":2538,"wr":2522},{"song":"Welcome to pop'n fantasy","avg":2161,"max":2262,"wr":2260},{"song":"will","avg":2082,"max":2238,"wr":2229},{"song":"Windy Fairy","avg":2093,"max":2238,"wr":2222},{"song":"World Spider Web","avg":2366,"max":2522,"wr":2512},{"song":"ZEPHYRANTHES","avg":2416,"max":2568,"wr":2567},{"song":"μ9","avg":2439,"max":2574,"wr":2569},{"song":"哀彩","avg":2410,"max":2532,"wr":2526},{"song":"蒼い弓箭","avg":2147,"max":2270,"wr":2263},{"song":"蒼が消えるとき","avg":2321,"max":2464,"wr":2452},{"song":"緋月の狂想曲","avg":1963,"max":2128,"wr":2112},{"song":"朱と碧のランページ","avg":2543,"max":2648,"wr":2646},{"song":"浅見文彦の事件簿～迷宮荘のワンピース","avg":2041,"max":2230,"wr":2191},{"song":"明日への誓い","avg":2302,"max":2442,"wr":2429},{"song":"アルストロメリア","avg":2473,"max":2606,"wr":2598},{"song":"アルレシャ","avg":2170,"max":2248,"wr":2247},{"song":"アンデスの太陽","avg":2224,"max":2320,"wr":2312},{"song":"怒りと共に去りぬ！！","avg":2274,"max":2380,"wr":2374},{"song":"怒れる大きな白い馬～S.S.D.の役～","avg":1955,"max":2154,"wr":2133},{"song":"一触即発☆禅ガール","avg":1951,"max":2132,"wr":2115},{"song":"異能対決!VS.淀ジョル","avg":2026,"max":2144,"wr":2142},{"song":"ウソツキ横丁は雨模様","avg":2264,"max":2462,"wr":2441},{"song":"憂恋☆アクティベーション","avg":2317,"max":2466,"wr":2457},{"song":"永遠という名の媚薬 ～Pyramid Power・Death Match ver.～","avg":1848,"max":2196,"wr":2168},{"song":"おーまい！らぶりー！すうぃーてぃ！だーりん！","avg":2357,"max":2522,"wr":2499},{"song":"おたすけ！アン子ちゃん (シノビアンレディーのテーマ 弐)","avg":2404,"max":2580,"wr":2561},{"song":"カタルシスの月","avg":2546,"max":2640,"wr":2637},{"song":"ガッテンだ！！","avg":2070,"max":2328,"wr":2309},{"song":"烏","avg":1776,"max":1878,"wr":1876},{"song":"ギターケンドー","avg":2033,"max":2152,"wr":2146},{"song":"キャトられ♥恋はモ～モク","avg":2608,"max":2806,"wr":2788},{"song":"狂水一華","avg":2381,"max":2508,"wr":2495},{"song":"キルト","avg":2524,"max":2644,"wr":2640},{"song":"禁じられた契約","avg":2270,"max":2378,"wr":2372},{"song":"空想モダニズム","avg":2399,"max":2464,"wr":2463},{"song":"空想モダニズム -Alice Schach remix-","avg":2165,"max":2302,"wr":2282},{"song":"黒髪乱れし修羅となりて","avg":2546,"max":2748,"wr":2745},{"song":"黒き螺旋のクレイドル","avg":2410,"max":2526,"wr":2523},{"song":"結果オーライ！相性チェック","avg":2328,"max":2388,"wr":2383},{"song":"玄兎ノ舞","avg":2280,"max":2418,"wr":2415},{"song":"ゴールデンハート　ft. Kimberley Nutbey","avg":2402,"max":2522,"wr":2514},{"song":"恋とメロンとキューピット","avg":2160,"max":2338,"wr":2330},{"song":"恋はどう？モロ◎波動OK☆方程式！！","avg":2648,"max":2778,"wr":2766},{"song":"黒点","avg":2449,"max":2644,"wr":2618},{"song":"コルドバの女","avg":1952,"max":2088,"wr":2077},{"song":"コンビニエンスドラマ","avg":2083,"max":2242,"wr":2224},{"song":"左脳スパーク","avg":2639,"max":2756,"wr":2749},{"song":"サヨナラ・ヘヴン","avg":2367,"max":2540,"wr":2509},{"song":"残酷な天使のテーゼ","avg":1647,"max":1736,"wr":1733},{"song":"幸せを謳う詩","avg":1862,"max":2020,"wr":2011},{"song":"辞世テンプレート","avg":2754,"max":2912,"wr":2897},{"song":"シャムシールの舞","avg":2212,"max":2362,"wr":2354},{"song":"人妖絵巻其の二「鬼」～夜叉の祭は終夜～","avg":2410,"max":2538,"wr":2530},{"song":"水月鏡花のコノテーション","avg":2508,"max":2590,"wr":2588},{"song":"青春の扉","avg":2109,"max":2330,"wr":2325},{"song":"零と弌の鍵の唄","avg":2242,"max":2422,"wr":2408},{"song":"千年ノ理","avg":2303,"max":2466,"wr":2456},{"song":"蒼氷のフラグメント","avg":1825,"max":1950,"wr":1935},{"song":"そこはかとなくロマンセ","avg":1925,"max":2056,"wr":2041},{"song":"√太陽系◎ドーナツ化計画∞∀∞","avg":2291,"max":2426,"wr":2414},{"song":"魂依","avg":2103,"max":2246,"wr":2233},{"song":"地方創生☆チクワクティクス","avg":2215,"max":2358,"wr":2350},{"song":"超恋愛☆エクストリーム・ガール","avg":2509,"max":2612,"wr":2604},{"song":"チルノのパーフェクトさんすう教室","avg":2378,"max":2526,"wr":2514},{"song":"つばめ","avg":1856,"max":1992,"wr":1986},{"song":"徹頭徹尾Thrive at Perfect Fourth","avg":2246,"max":2394,"wr":2381},{"song":"天上の星 ～黎明記～","avg":2106,"max":2222,"wr":2215},{"song":"電波の暮らし","avg":1971,"max":2054,"wr":2050},{"song":"桃花恋情","avg":2512,"max":2592,"wr":2583},{"song":"どうなっちゃったって","avg":2113,"max":2272,"wr":2267},{"song":"鳥無き島にて","avg":2174,"max":2342,"wr":2326},{"song":"取り残された美術(Arranged:HiZuMi)","avg":2141,"max":2242,"wr":2235},{"song":"†渚の小悪魔ラヴリィ～レイディオ†","avg":2521,"max":2642,"wr":2639},{"song":"ナスカの丘","avg":2519,"max":2628,"wr":2614},{"song":"懐色坂","avg":2000,"max":2134,"wr":2121},{"song":"西麻布水道曲","avg":1272,"max":1564,"wr":1522},{"song":"ネリと琥珀糖","avg":2189,"max":2316,"wr":2307},{"song":"ノープラン・デイズ","avg":2367,"max":2470,"wr":2461},{"song":"旗（Mystic Mix）","avg":2244,"max":2416,"wr":2411},{"song":"洟・月・奇蹟","avg":1696,"max":1810,"wr":1802},{"song":"疾風","avg":2419,"max":2574,"wr":2563},{"song":"霽れと褻と穢れ","avg":2336,"max":2438,"wr":2424},{"song":"表裏一体！？怪盗いいんちょの悩み♥","avg":2452,"max":2618,"wr":2600},{"song":"プリンシプル","avg":2891,"max":3000,"wr":2999},{"song":"ブルーローズイノセンス","avg":2179,"max":2300,"wr":2293},{"song":"プロレタリア狂騒歌","avg":2526,"max":2690,"wr":2678},{"song":"ペリーでぇす！","avg":2291,"max":2434,"wr":2429},{"song":"鳳凰～Chinese Phoenix Mix～","avg":1962,"max":2194,"wr":2166},{"song":"ぼくらの16bit戦争","avg":2171,"max":2310,"wr":2293},{"song":"星屑の夜果て","avg":2389,"max":2538,"wr":2524},{"song":"星屑ブレスレット","avg":1892,"max":2028,"wr":2013},{"song":"ほしのつくりかた","avg":1889,"max":1972,"wr":1972},{"song":"ボタン","avg":2525,"max":2626,"wr":2617},{"song":"ポチコの幸せな日常","avg":2410,"max":2562,"wr":2549},{"song":"ホピタスコピラ","avg":2166,"max":2350,"wr":2339},{"song":"ホムンクルスレシピ","avg":2250,"max":2368,"wr":2356},{"song":"滅びに至るエランプシス","avg":2428,"max":2532,"wr":2529},{"song":"マイアガル、マイオドル","avg":2314,"max":2458,"wr":2450},{"song":"マインド・ゲーム","avg":2107,"max":2240,"wr":2238},{"song":"魔界！痛快！ヘルダンス","avg":2006,"max":2200,"wr":2179},{"song":"巻寿司戦隊ウマイヤン ～コードネームはグリーン～","avg":2508,"max":2614,"wr":2606},{"song":"曼珠沙華","avg":2273,"max":2428,"wr":2424},{"song":"乱れた風紀に天罰を","avg":1911,"max":2130,"wr":2108},{"song":"ミラクル・スイート・スイーツ・マジック！！","avg":2424,"max":2552,"wr":2532},{"song":"無意識のフィロソフィア","avg":2416,"max":2550,"wr":2536},{"song":"夢幻ノ光","avg":2158,"max":2226,"wr":2222},{"song":"斑咲花","avg":2309,"max":2528,"wr":2501},{"song":"めうめうぺったんたん！！","avg":2908,"max":3060,"wr":3048},{"song":"ラピストリアの約束","avg":2348,"max":2430,"wr":2426},{"song":"ラブケミ","avg":2422,"max":2544,"wr":2526},{"song":"ランカーキラーガール","avg":2396,"max":2522,"wr":2514},{"song":"リナリア","avg":2021,"max":2154,"wr":2141},{"song":"麗破唖甦～rebirth～","avg":2282,"max":2422,"wr":2419},{"song":"流星☆ハニー Perforation Mix","avg":2296,"max":2482,"wr":2473},{"song":"繚乱ヒットチャート","avg":2620,"max":2874,"wr":2847},{"song":"凛として咲く花の如く","avg":2422,"max":2532,"wr":2531},{"song":"レトロスペクト路","avg":2330,"max":2464,"wr":2448},{"song":"恋愛観測 -Rock Band Ver.-","avg":2284,"max":2404,"wr":2398},{"song":"六兆年と一夜物語","avg":1960,"max":2068,"wr":2061},{"song":"路男","avg":2715,"max":2858,"wr":2850}];const domparser=new DOMParser();const ConvToUTF8=(res)=>{return res.arrayBuffer().then((buffer)=>{if(res.headers.get("Content-Type").includes("UTF-8")){return new TextDecoder().decode(buffer)}else{return new TextDecoder("Shift_JIS").decode(buffer)}})};const idx=await fetch(`${PLAY_DATA_URL}/index.html`).then(ConvToUTF8).then(text=>domparser.parseFromString(text,"text/html"));const player=idx.querySelector("#status_table > div.st_box > div:nth-child(2)").textContent;const chara=idx.getElementsByTagName('img').item(9).getAttribute("src");const GetMusicData=(url,level)=>{return fetch(url).then(ConvToUTF8).then(text=>domparser.parseFromString(text,"text/html")).then(doc=>doc.querySelectorAll("ul.mu_list_table > li")).then(list=>{return Array.from(list).filter(li=>li.firstElementChild.className.startsWith("col")).map(li=>[li.firstElementChild.firstElementChild.textContent,li.firstElementChild.lastElementChild.textContent,li.children[3].textContent,li.children[3].firstChild.src.replace(`${MEDAL_IMAGE_URL}/meda_`,"").replace(".png",""),]).map(([song,genre,score,medal])=>{return{song,genre,score,medal,level}})})};const promises=[[0,46],[1,46],[2,46],[3,46],[4,46],[5,46],[6,46],[7,46],[8,46],[9,46],[10,46],[11,46],].map(([page,level])=>GetMusicData(`${PLAY_DATA_URL}/mu_lv.html?page=${page}&level=${level}`,level));let music_data=(await Promise.all(promises)).flat();const POW=1.175;const MINBPI=0;const CalcBPI=(s,k,z,m)=>{const CalcPGF=(x)=>{return x===m?m*2:1+(x/m-0.5)/(1-x/m)};const S=CalcPGF(s);const K=CalcPGF(k);const Z=CalcPGF(z);const S_=S/K;const Z_=Z/K;if(s>=k){const result=(100*(Math.pow(Math.log(S_),POW)/Math.pow(Math.log(Z_),POW)));return Math.max(MINBPI,Math.round(result*100)/100)}else{const result=(-100*(Math.pow(-Math.log(S_),POW)/Math.pow(Math.log(Z_),POW)));return Math.max(MINBPI,Math.round(result*100)/100)}};const CalcAvgBPI=(music_num,music_data)=>{const coef=Math.log2(music_num);const sumbpi=music_data.reduce((sum,i)=>sum+(Math.pow(Number(i.bpi),coef))/music_num,0);const result=Math.pow(sumbpi,1/coef);return Math.round(result*100)/100};Object.keys(music_data).map(item=>{const SONG=SONGS.find(({song})=>song===music_data[item].song);if(SONG){const bmscore=Math.round(SONG.max*(1-(100000-music_data[item].score)/60000));if(bmscore>0){const bpi=CalcBPI(bmscore,SONG.avg,SONG.wr,SONG.max);music_data[item].bpi=Math.max(bpi,MINBPI)}else{music_data[item].bpi=MINBPI}}else{console.log(music_data[item].song);music_data[item].bpi=MINBPI}});music_data=music_data.filter(a=>!!a);music_data.sort((a,b)=>{if(a.score<b.score)return 1;if(a.score>b.score)return-1;return 0});music_data.sort((a,b)=>{if(a.bpi<b.bpi)return 1;if(a.bpi>b.bpi)return-1;return 0});const avg_data=music_data.filter(i=>i.score!=0);const avg_score=Math.round(avg_data.reduce((sum,i)=>sum+Number(i.score),0)/avg_data.length);const avg_bpi=CalcAvgBPI(music_data.length,music_data);const top=music_data.slice(0,30);const bottom=music_data.slice(-30);Object.keys(music_data).map(item=>{if(music_data[item].song.length>20){music_data[item].song=music_data[item].song.substr(0,20)+'...'}});const divEl=document.createElement("div");divEl.id="popnRadar";divEl.innerHTML=` <style scoped> .popnPage { display: flex; justify-content: center; color: #FFFFFF; background-color: #2D2D2D } .popnTable { background-color: #0D0D0D; border-collapse: collapse; } .popnTable caption { text-align: center; back-ground: #0D0D0D; } .popnTable tr { border-bottom: 2px solid #2D2D2D; } .popnTable th { padding: 4px; } .popnTable td { padding: 0 4px; white-space: nowrap; } .popnTable td img { vertical-align: middle; } .profileTable { margin: 5px auto; font-size: 14px; background-color: #0D0D0D; border-collapse: collapse; } .profileTable tr { border-bottom: 2px solid #2D2D2D; } .profileTable td { width: 175px; padding: 5px; } .profileTable td:first-child { font-weight: bold; } .profileTable canvas { position: right; width: 350px; height: 2500px; } .footnote { font-size: 10px; margin: 8px auto; color: gray; text-align: center; } @media (max-width: 768px) { .popnPage { flex-direction: column; } .popnTable { width: 100%; margin-bottom: 20px; } .profileTable { width: auto; } .popnTable th:first-child,td:first-child { min-width: 20px; } .popnTable th:nth-child(4),td:nth-child(4) { min-width: 40px; } .popnTable th:nth-child(5),td:nth-child(5) { min-width: 40px; } .popnTable th:nth-child(6),td:nth-child(6) { min-width: 50px; } } </style> <div class="popnPage"> <table class="profileTable"> <tr> <td>プレーヤー名</td> <td>${player}</td> </tr> <tr> <td>使用キャラクター</td> <td><img src="${chara}"></td> </tr> <tr> <td>平均スコア</td> <td>${avg_score}</td> </tr> <tr> <td>総合BPI</td> <td>${avg_bpi}</td> </tr> </table> </div> <div class="popnPage"> <table class="popnTable"> <caption>TOP 30</caption> <tr> <th>BPI</th> <th>LV</th> <th>曲名</th> <th>スコア</th> <th>メダル</th> </tr> ${top.map(x => `<tr><td>${x.bpi}</td><td>${x.level}</td><td width=250px>${x.song}</td><td>${x.score}</td><td><img src="${MEDAL_IMAGE_URL}/meda_${x.medal}.png"></td></tr>` ).join("")} </table> <table class="popnTable"> <caption>BOTTOM 30</caption> <tr> <th>BPI</th> <th>LV</th> <th>曲名</th> <th>スコア</th> <th>メダル</th> </tr> ${bottom.map(x => `<tr><td>${x.bpi}</td><td>${x.level}</td><td width=250px>${x.song}</td><td>${x.score}</td><td><img src="${MEDAL_IMAGE_URL}/meda_${x.medal}.png"></td></tr>` ).join("")} </table> </div> <div class="footnote">pop'n music BPI calculator ${VERSION}</div> `;document.body.innerHTML="";document.body.appendChild(divEl)} wapper()